{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["/**\n * UMBRA-GRID.BLOG - CORE SCRIPT 2026\n * Содержит: Three.js, Mobile Menu, Scroll Reveal, Accordion, Contact Form, Cookies\n */\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  // 1. Инициализация иконок Lucide\n  if (window.lucide) lucide.createIcons();\n\n  // 2. Мобильное меню\n  const menuToggle = document.querySelector('.menu-toggle');\n  const nav = document.getElementById('main-nav');\n  const body = document.body;\n\n  if (menuToggle) {\n      menuToggle.addEventListener('click', () => {\n          nav.classList.toggle('active');\n          body.classList.toggle('body-lock');\n\n          // Смена иконки\n          const icon = menuToggle.querySelector('i');\n          if (nav.classList.contains('active')) {\n              icon.setAttribute('data-lucide', 'x');\n          } else {\n              icon.setAttribute('data-lucide', 'menu');\n          }\n          lucide.createIcons();\n      });\n  }\n\n  // Закрытие меню при клике на ссылку\n  document.querySelectorAll('.nav__link').forEach(link => {\n      link.addEventListener('click', () => {\n          nav.classList.remove('active');\n          body.classList.remove('body-lock');\n          const icon = menuToggle.querySelector('i');\n          icon.setAttribute('data-lucide', 'menu');\n          lucide.createIcons();\n      });\n  });\n\n  // 3. Эффект скролла хедера\n  const header = document.querySelector('.header');\n  window.addEventListener('scroll', () => {\n      if (window.scrollY > 50) {\n          header.classList.add('header--scrolled');\n      } else {\n          header.classList.remove('header--scrolled');\n      }\n  });\n\n  // 4. Intersection Observer (Scroll Reveal)\n  const observerOptions = { threshold: 0.1 };\n  const observer = new IntersectionObserver((entries) => {\n      entries.forEach(entry => {\n          if (entry.isIntersecting) {\n              entry.target.classList.add('active');\n          }\n      });\n  }, observerOptions);\n\n  document.querySelectorAll('.reveal').forEach(el => observer.observe(el));\n\n  // 5. Аккордеон (Инновации)\n  const accordionItems = document.querySelectorAll('.accordion__item');\n  accordionItems.forEach(item => {\n      const headerBtn = item.querySelector('.accordion__header');\n      const content = item.querySelector('.accordion__content');\n\n      headerBtn.addEventListener('click', () => {\n          const isActive = item.classList.contains('active');\n\n          // Сброс остальных\n          accordionItems.forEach(i => {\n              i.classList.remove('active');\n              i.querySelector('.accordion__content').style.maxHeight = null;\n          });\n\n          if (!isActive) {\n              item.classList.add('active');\n              content.style.maxHeight = content.scrollHeight + \"px\";\n          }\n      });\n  });\n\n  // 6. Форма контактов\n  const contactForm = document.getElementById('contactForm');\n  if (contactForm) {\n      // Генерация капчи\n      const captchaLabel = document.getElementById('captchaQuestion');\n      const n1 = Math.floor(Math.random() * 10) + 1;\n      const n2 = Math.floor(Math.random() * 10) + 1;\n      const correctSum = n1 + n2;\n      if (captchaLabel) captchaLabel.innerText = `${n1} + ${n2}`;\n\n      // Валидация телефона (только цифры)\n      const phoneInput = document.getElementById('phone');\n      phoneInput.addEventListener('input', (e) => {\n          e.target.value = e.target.value.replace(/[^\\d+]/g, '');\n      });\n\n      contactForm.addEventListener('submit', (e) => {\n          e.preventDefault();\n          const captchaInput = document.getElementById('captchaInput').value;\n\n          if (parseInt(captchaInput) !== correctSum) {\n              alert('Ошибка капчи. Пожалуйста, решите пример правильно.');\n              return;\n          }\n\n          const btn = contactForm.querySelector('button');\n          btn.disabled = true;\n          btn.innerText = 'Отправка...';\n\n          setTimeout(() => {\n              contactForm.style.display = 'none';\n              document.getElementById('formSuccess').style.display = 'block';\n              lucide.createIcons();\n          }, 1500);\n      });\n  }\n\n  // 7. Cookie Popup logic\n  const cookiePopup = document.getElementById('cookiePopup');\n  const acceptBtn = document.getElementById('acceptCookies');\n\n  if (!localStorage.getItem('cookiesAccepted')) {\n      setTimeout(() => {\n          cookiePopup.classList.add('active');\n      }, 2000);\n  }\n\n  acceptBtn.addEventListener('click', () => {\n      localStorage.setItem('cookiesAccepted', 'true');\n      cookiePopup.classList.remove('active');\n  });\n\n  // 8. Параллакс для картинок блога (на десктопе)\n  if (window.innerWidth > 1024) {\n      window.addEventListener('scroll', () => {\n          document.querySelectorAll('.blog-card__image img').forEach(img => {\n              const rect = img.parentElement.getBoundingClientRect();\n              if (rect.top < window.innerHeight && rect.bottom > 0) {\n                  const shift = (window.innerHeight - rect.top) * 0.05;\n                  img.style.transform = `scale(1.1) translateY(${shift - 20}px)`;\n              }\n          });\n      });\n  }\n});\n\n/**\n* THREE.JS HERO ANIMATION\n*/\nfunction initThreeHero() {\n  const container = document.getElementById('hero-canvas');\n  if (!container || !window.THREE) return;\n\n  const scene = new THREE.Scene();\n  scene.fog = new THREE.Fog(0x0F172A, 1, 1000);\n\n  const camera = new THREE.PerspectiveCamera(60, container.clientWidth / container.clientHeight, 1, 2000);\n  camera.position.set(0, 150, 400);\n  camera.rotation.x = -0.8;\n\n  const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });\n  renderer.setSize(container.clientWidth, container.clientHeight);\n  renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n  container.appendChild(renderer.domElement);\n\n  const geometry = new THREE.PlaneBufferGeometry(2000, 2000, 60, 60);\n  const material = new THREE.MeshBasicMaterial({\n      color: 0x4F46E5,\n      wireframe: true,\n      transparent: true,\n      opacity: 0.3\n  });\n\n  const mesh = new THREE.Mesh(geometry, material);\n  mesh.rotation.x = -Math.PI / 2;\n  scene.add(mesh);\n\n  let time = 0;\n  function animate() {\n      requestAnimationFrame(animate);\n      time += 0.005;\n      const pos = geometry.attributes.position;\n      for (let i = 0; i < pos.count; i++) {\n          const x = pos.getX(i);\n          const y = pos.getY(i);\n          const z = Math.sin(x * 0.005 + time) * 30 + Math.cos(y * 0.005 + time) * 20;\n          pos.setZ(i, z);\n      }\n      pos.needsUpdate = true;\n      mesh.rotation.z += 0.001;\n      renderer.render(scene, camera);\n  }\n\n  window.addEventListener('resize', () => {\n      camera.aspect = container.clientWidth / container.clientHeight;\n      camera.updateProjectionMatrix();\n      renderer.setSize(container.clientWidth, container.clientHeight);\n  });\n\n  animate();\n}\n\n// Запуск Three.js после всех проверок\nwindow.addEventListener('load', initThreeHero);"],"names":["menuToggle","nav","body","icon","link","header","observerOptions","observer","entries","entry","el","accordionItems","item","headerBtn","content","isActive","i","contactForm","captchaLabel","n1","n2","correctSum","e","captchaInput","btn","cookiePopup","acceptBtn","img","rect","shift","initThreeHero","container","scene","camera","renderer","geometry","material","mesh","time","animate","pos","x","y","z"],"mappings":"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"}